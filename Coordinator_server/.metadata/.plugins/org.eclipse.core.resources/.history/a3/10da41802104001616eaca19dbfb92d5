package threads;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.Socket;

public class Client_Thread implements Runnable {

	private Socket clientSocket;
	private InputStreamReader streamReader;
	private OutputStreamWriter streamWriter;
	private boolean execute;
	
	public Client_Thread(Socket clientSocket) throws IOException {
		this.execute = true;
		this.clientSocket = clientSocket;
		this.streamReader = new InputStreamReader(clientSocket.getInputStream());
		this.streamWriter = new OutputStreamWriter(clientSocket.getOutputStream());
	}
	
	@Override
	public void run() {
		BufferedReader bufferedReader;
		String message;
		while(execute){
			bufferedReader = new BufferedReader(streamReader); // get the client message
	
			try {
				message = bufferedReader.readLine();
				System.out.println(message + "\n");
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
		
		
	}
	
	public boolean sendToClient(String message)
	{
		BufferedWriter bufferWriter = new BufferedWriter(streamWriter);
		try {
			bufferWriter.write(message);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			return false;
		}
		
		return true;
	}

}
